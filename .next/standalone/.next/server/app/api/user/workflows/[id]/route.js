(()=>{var e={};e.id=981,e.ids=[981],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},32615:e=>{"use strict";e.exports=require("http")},35240:e=>{"use strict";e.exports=require("https")},98216:e=>{"use strict";e.exports=require("net")},35816:e=>{"use strict";e.exports=require("process")},68621:e=>{"use strict";e.exports=require("punycode")},76162:e=>{"use strict";e.exports=require("stream")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},6162:e=>{"use strict";e.exports=require("worker_threads")},71568:e=>{"use strict";e.exports=require("zlib")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},87561:e=>{"use strict";e.exports=require("node:fs")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},87503:e=>{"use strict";e.exports=require("node:net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},84492:e=>{"use strict";e.exports=require("node:stream")},72477:e=>{"use strict";e.exports=require("node:stream/web")},41041:e=>{"use strict";e.exports=require("node:url")},47261:e=>{"use strict";e.exports=require("node:util")},65628:e=>{"use strict";e.exports=require("node:zlib")},58359:()=>{},93739:()=>{},67070:(e,r,t)=>{"use strict";t.r(r),t.d(r,{originalPathname:()=>m,patchFetch:()=>k,requestAsyncStorage:()=>w,routeModule:()=>x,serverHooks:()=>q,staticGenerationAsyncStorage:()=>f});var s={};t.r(s),t.d(s,{DELETE:()=>l,GET:()=>c,PUT:()=>d});var o=t(49303),i=t(88716),u=t(60670),n=t(87070),a=t(12497),p=t(85662);async function c(e,{params:r}){try{let{userId:e}=await (0,a.I)();if(!e)return n.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let t=await (0,p.C)(),{data:s,error:o}=await t.from("user_workflows").select("*").eq("id",r.id).eq("user_id",e).single();if(o)return console.error("Erro ao buscar workflow:",o),n.NextResponse.json({error:"Workflow n\xe3o encontrado"},{status:404});return n.NextResponse.json({workflow:s})}catch(e){return console.error("Erro na API de workflow:",e),n.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}async function d(e,{params:r}){try{let{userId:t}=await (0,a.I)();if(!t)return n.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let{name:s,description:o,workflow_data:i,is_public:u}=await e.json(),c=await (0,p.C)(),{data:d,error:l}=await c.from("user_workflows").update({name:s,description:o,workflow_data:i,is_public:u,updated_at:new Date().toISOString()}).eq("id",r.id).eq("user_id",t).select().single();if(l)return console.error("Erro ao atualizar workflow:",l),n.NextResponse.json({error:"Erro ao atualizar workflow"},{status:500});return n.NextResponse.json({workflow:d})}catch(e){return console.error("Erro na API de workflow:",e),n.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}async function l(e,{params:r}){try{let{userId:e}=await (0,a.I)();if(!e)return n.NextResponse.json({error:"N\xe3o autorizado"},{status:401});let t=await (0,p.C)(),{error:s}=await t.from("user_workflows").delete().eq("id",r.id).eq("user_id",e);if(s)return console.error("Erro ao deletar workflow:",s),n.NextResponse.json({error:"Erro ao deletar workflow"},{status:500});return n.NextResponse.json({message:"Workflow deletado com sucesso"})}catch(e){return console.error("Erro na API de workflow:",e),n.NextResponse.json({error:"Erro interno do servidor"},{status:500})}}let x=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/user/workflows/[id]/route",pathname:"/api/user/workflows/[id]",filename:"route",bundlePath:"app/api/user/workflows/[id]/route"},resolvedPagePath:"/home/ubuntu/vertical-fashion-project/app/api/user/workflows/[id]/route.ts",nextConfigOutput:"standalone",userland:s}),{requestAsyncStorage:w,staticGenerationAsyncStorage:f,serverHooks:q}=x,m="/api/user/workflows/[id]/route";function k(){return(0,u.patchFetch)({serverHooks:q,staticGenerationAsyncStorage:f})}},85662:(e,r,t)=>{"use strict";t.d(r,{C:()=>n});var s=t(72438),o=t(12497);let i="https://jwpzenydjjmfzybkfqff.supabase.co",u="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp3cHplbnlkamptZnp5YmtmcWZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTA1Njk4NDYsImV4cCI6MjA2NjE0NTg0Nn0.zlWSiktahVmSmz4uo3VAs0g90BQkEIjZ11fEmfIIXjU";(0,s.eI)(i,u);let n=async()=>{let{getToken:e}=await (0,o.I)(),r=await e({template:"supabase"});return console.log("Supabase Client: Token recebido do Clerk:",r?"Sim":"N\xe3o",r),(0,s.eI)(i,u,{global:{headers:{Authorization:`Bearer ${r}`}}})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,70,497,922],()=>t(67070));module.exports=s})();